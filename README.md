# ESP32_tracke_gps_wialon_ips
Использование ESP32 В качестве трекера, работа с сервером WIALON от GURTAM по протоколу WIALON IPS 1.1.
i.x.c.o.n@yandex.ru https://t.me/SuverenDmitry

//21.02.2026
Версия 5 ESP32_SIM800_WIALON_IPS_v5.ino из последний на иболее стабильная. В ней  реализовано много функций, пока без GPS.

Что релизавано:
Автоматическое соеденение с сервером, даже при перезагрузке автоматически пытается  востановиться и начать работать с сервером. Поддерживаются команды через UART:

AT+ - Все что начинается с AT+ автоматически пересылается в сериал сим модуля

VERSION - возвращает версию ПО и релиз

RESET - перезагрузить есп32 и сим модуль

GETIMEI - Возвращает ИМЕЙ сим модуля который устанавливается как имей трекера

GETHOST - возвращает адрес сервера

GETPORT - возвращает порт сервера

GETAPN - возврашает параметры АПН

PORT= - установить порт сервера

HOST= - установить адрес сервера

APNLOGIN= - установить логин АПН

APNPASSWORD= - установить пароль АПН

APN= - установить АПН

GETIP - получить АЙПИ сим модуля

SENDM= - отправить произвольное сообщение на сервер

GETSTATUS - получить все статусты работы сим модуля

Трекер принимает от сервера все команды, если команда не известная  он просто пересылает ее назад.
Формат всех команд такой: #КОМАНДА#, далее примеры реализованных команд.

#IP# - получить АПИ сим модуля

#GETOUT# - Получить состоние всех выходов 0 или 1 от  0 до 3 выхода.

#RESET# - Перезагрузить трекер

#SETOUTX=Y# -Установить выход X в состояние Y
X - может принимать  значение от 0 до 3
Y - может принимать  значение от 0 до 1

#SAVEPOINT# - сохранить состояние и отправить на сервер
//20.02.2026
Начиная с версии файла ESP32_SIM800_WIALON_IPS_v0.ino

Используется в качестве  модуля SIM800, а не Wi-Fi.

Далее в каждой версии есть  доработки, которые показывают прогресс изменений, можно взять версию ниже и изменить ее под себя.

Пока предварительно задача, научить  отправлять данные по  UDP/TCP.

Принимать и отправлять СМС через СИМ модуль.

На пате  будет реализован либо протокол WIALON IPS 1.1 или WIALON COMBAIN, последний в преспективе так как он поддерживает  геолокацию по Wi-Fi

//01.03.2024

Добавлена 7 версия кода  для ESP32 CAM.
Доступный функционал:
1. При  первом запуске,  загружаются настройки по умолчанию.
2. Возможность через USB вносить изменения  в настройки  работы, все настройки храняться в памяти платы.
3. Время для пакетов берется: pool.ntp.org
4. Поддерживается работа с GPS модулем NEO 6M, данные о местоположении  записываются в пакет, без фильтрации.
5. Поддерживается получение и выполнение команд от сервера.
6. Повышена стабильность работы всех функций.
7. Добавлено, что теперь при остуствии соеденения с WiFi плата будет пытаться работать, выполнять команды по USB, а не тупо перезагружаться.
8. Для отправки данных на сервер используются урезанные пакеты SD по TPC.
9. Плата поддерживает работу по протоколу WIALON IPS
10. Работает с серверами:
* gps.trekberry.ru
* gps.gpslife.ru
* wialon
* wialon local
* wialon pro
* ГЛОНАССсофт
* СКАУТ
* Navixy
* Где мои
* Fort Telecom
* PILOT
* flespi.com
* traccar.org
* другие сервера у которых есть поддержка Wialon IPS 1.1 протокола

//END 01.03.2024

//28.02.2024

Достпуна 5 версия разработки.
Что нового: теперь GPS работает  более стабильно.

Какие  есть не достатки:
В протоколе  разбираются не все данные, например отсуствует скорость или HDOP.
Координаты скачут на месте, нет ни какой фильтрации.
А так же наблюдается не стабильность в  работе с командами от сервера, выполняется примерно 50% команд, или они выполняются,но нет отправки  ответа на сервер.

Заключение по 5 версии: Если  заменить вайфай на GSM то по характеристикам сравнялись с китайскими трекерами  за 1200-1500 рублей.

//END 28.02.2024

//27.02.2024

Подправил глюки и  баги, пока остался баг с GPS корявым определением, остальное подправил.

//END 27.02.2024

//19.01.2024

Добавил частично функции  работы с GPS. Дописал функцию получения данных от сервера.

Дополнил: получением и разбором данных от GPS модуля, теперь получаем  команды и можем с ними работать. Исправил ошибки в коде, подправил  защиту от зависаний.

//END 19.01.2024

//18.01.2024

Все сделано на основе платы ESP32 CAM.
На GPIO16 висит GPS модуль NEO 6, который передает данные о своем местоположении.

/*
#AUTHOR Дмитрий Витальевич Мельник
#MAIL i.x.c.o.n@yandex.ru
#LICENSE Использование  только  для не коммерческих проектов, без упоминания автора. При использовании автор не несет ни какой отвественности, и не дает ни какой гарантии работы. Не ведет поддержку или исправление ошибок. 
*/
В данном коде не настроен разбор данных от GPS модуля и  прием команд или обработка  ошибок.
Все данные передаются через WiFi хранения или  запись не предусмотрена.
Дополнительно воможно внедрить: Камеру, протокол ее поддерживает. Тексторые сообщения, как от сервера, но и при наличии возможности и от самого модуля. Выполнение команд, такие как сделать фото или считать значение с пина или  заблокировать, управление по минусу.

//END 18.01.2024
